import { Component, EventEmitter, Input, Output } from '@angular/core';
import { Subject } from 'rxjs';
import { TimetableConstants } from './timetable.constant';
import * as _ from "lodash";
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/common";
import * as i3 from "ngx-drag-drop";
import * as i4 from "ng-select2";
import * as i5 from "@ng-bootstrap/ng-bootstrap";
import * as i6 from "@ngx-translate/core";
export class TimetableComponent {
    constructor(fb) {
        this.fb = fb;
        this.objectKeys = Object.keys;
        this.SEMESTERS = {
            FIRST: 'FIRST',
            SECOND: 'SECOND',
            ALL: 'ALL'
        };
        this.semesters = Object.keys(this.SEMESTERS);
        this.solverStatusMessage = null;
        this.destroyed$ = new Subject();
        this.MODE = {
            EDIT: 'edit',
            NEW: 'new'
        };
        this.isEnableAdjustMode = false;
        this.onRemoveAction = new EventEmitter();
        this.onDropAcion = new EventEmitter();
        this.onCellClickAction = new EventEmitter();
        this.onCreateNewLession = new EventEmitter();
        this.activeLessions = [];
        this.activeTeachManagement = undefined;
        this.daysOfWeek = [
            "MONDAY",
            "TUESDAY",
            "WEDNESDAY",
            "THURSDAY",
            "FRIDAY",
            "SATURDAY",
            "SUNDAY",
        ];
        this.draggable = {
            data: null,
            effectAllowed: "all",
            disable: true,
            handle: false
        };
        this.timeTableData = {};
        this.isAutoUpdateClassIds = false;
        this.isInProgress = new EventEmitter();
        this.selectedClasses = [];
        this.classListSelectedDefault = [];
        this.teachManagements = [];
        this.dayLessionSlots = [...Array(5).keys()];
        this.CALLBACK_TIME = 5000;
        this.checkingGenerateProgresser = null;
        this.isDisabledPlanning = false;
        this.slotNumOfDay = [];
        this.showProgressLoading = false;
        this.TIMETABLE_EDIT_MODE = TimetableConstants.TIMETABLE_EDIT_MODE;
        this.FORM_FIELDS = {
            MAJOR: 'majorCode',
            TUTOR: 'tutorUuid',
            CLASS_ID: 'classId',
            SEMESTER: 'semester'
        };
        this.form = this.fb.group({
            [this.FORM_FIELDS.MAJOR]: [{ value: -1 }],
            [this.FORM_FIELDS.TUTOR]: [{ value: '' }]
        });
    }
    ngOnChanges(changes) {
        if (changes['timeShift']?.currentValue) {
            this.buildTimeTableBasic();
        }
        if (changes['timeslots']?.currentValue) {
            this.initTimetableSlot();
        }
        if (changes['isEnableAdjustMode']?.currentValue) {
            this.draggable = {
                ...this.draggable,
                disable: !this.isEnableAdjustMode
            };
        }
        if (changes['classes']?.currentValue && !changes['timeslots']?.firstChange) {
            this.resetTimeTable();
        }
        if (changes['lessions']?.currentValue) {
            this.mappingDataToTable();
        }
        console.log("changes:", changes);
    }
    initTimetableSlot() {
        const alltimeslot = this.timeslots;
        this.daysOfWeek.forEach((day) => {
            const slotsOfDay = alltimeslot.filter((slot) => slot.dayOfWeek === day && slot.timeShift === this.timeShift);
            this.timeTableData[day] = {
                items: _.orderBy(slotsOfDay, ["order"]),
            };
            const maxLession = this.getMaxlessionOrder(slotsOfDay);
            this.slotNumOfDay = [...Array(maxLession).keys()];
        });
    }
    getMaxlessionOrder(timeSlot) {
        return _.maxBy(timeSlot, (o) => { return o.order; })?.order || 10;
    }
    buildTimeTableBasic() {
        this.daysOfWeek.forEach((day) => {
            this.timeTableData[day] = {
                items: [],
            };
        });
    }
    mappingDataToTable() {
        this.daysOfWeek.forEach((day) => {
            const slotsOfDay = this.lessions.filter((slot) => slot.dayOfWeek === day);
            this.timeTableData[day] = {
                items: _.orderBy(slotsOfDay, ["order"]),
            };
        });
        console.log("this.timeTableData:", this.timeTableData);
    }
    getLessonByOrder(day, index, timeShift) {
        return this.timeTableData[day].items.filter((item) => {
            const found = item.order === index && item?.timeShift === timeShift;
            return found;
        });
    }
    resetTimeTable() {
        this.buildTimeTableBasic();
    }
    onClickTutorName(tutor) {
        window.open(`/tutors/${tutor.uuid}`, '_blank');
    }
    getActiveGradeName() {
        return _.find(this.grades, (item) => item.code === this.filterForm['gradeCode'])?.title;
    }
    onDrop(event, day, slotNum, timeShift) {
        const dropSlot = this.getSlot(day, slotNum);
        const dropLession = {
            "id": _.get(event, "data.details.id", 0),
            "schoolYear": _.get(event, "data.details.schoolYear", 0),
            "semester": _.get(event, "data.details.semester", 0),
            timeslotId: dropSlot.id,
            timetableProblemId: this.timetableProblemId,
            "tutor": _.get(event, "data.details.tutor", null),
            "major": _.get(event, "data.details.major", null),
            "clazz": _.get(event, "data.details.clazz", null),
        };
        const payload = [dropLession];
        let currentLession = _.get(this.getLessonByOrder(day, slotNum, timeShift), "0", null);
        if (currentLession) {
            currentLession = {
                "id": _.get(currentLession, "details.id", 0),
                "schoolYear": _.get(currentLession, "details.schoolYear", 0),
                "semester": _.get(currentLession, "details.semester", 0),
                timeslotId: _.get(event, "data.details.timeslot.id", 0),
                timetableProblemId: this.timetableProblemId,
                "tutor": _.get(currentLession, "details.tutor", null),
                "major": _.get(currentLession, "details.major", null),
                "clazz": _.get(currentLession, "details.clazz", null),
            };
            payload.push(currentLession);
        }
        this.onDropAcion.emit(payload);
    }
    changeOnOffSwitch($event) {
        this.isEnableAdjustMode = $event.target.checked;
        this.draggable = {
            ...this.draggable,
            disable: !this.isEnableAdjustMode
        };
    }
    getSlot(day, order) {
        const slot = this.timeslots.find((slot) => slot.dayOfWeek === day && slot.timeShift === this.timeShift && slot.order === order);
        return slot;
    }
    getSlotByOrder(day, index) {
        return this.timeTableData[day].items.filter((item) => item.order === index);
    }
    onCellClick(p, day, slotNum, timeShift) {
        this.activeSlot = this.getSlot(day, slotNum);
        this.activeTeachManagement = null;
        if (!this.isEnableAdjustMode || !this.activeSlot.enabled)
            return;
        this.activeLessions = this.getLessonByOrder(day, slotNum, timeShift);
        p.open();
        if (!this.activeLessions?.length) {
            this.mode = this.MODE.NEW;
            this.activeFormDialog = p;
            this.onCellClickAction.emit(this.activeLessions);
        }
        else {
            this.mode = this.MODE.EDIT;
        }
    }
    onSelectTeachManagement($event) {
        this.activeTeachManagement = this.majorsTranscript.find((item) => item.code === $event);
    }
    getMajor() {
        return {
            "code": _.get(this.activeTeachManagement, 'teachManagement.majorCode', 0),
            "name": _.get(this.activeTeachManagement, 'teachManagement.majorName', 0),
        };
    }
    getTutor() {
        return {
            "uuid": _.get(this.activeTeachManagement, 'teachManagement.tutorUuid', 0),
            "name": _.get(this.activeTeachManagement, 'teachManagement.tutorName', 0)
        };
    }
    getClazz() {
        return {
            "code": _.get(this.activeTeachManagement, 'teachManagement.classId', 0),
            "name": _.get(this.activeTeachManagement, 'teachManagement.className', 0),
            "gradeCode": _.get(this.activeTeachManagement, 'teachManagement.gradeCode', 0),
        };
    }
    createNewLession() {
        if (!this.form.valid)
            return;
        const payload = {
            "schoolYear": this.schoolYear,
            "semester": this.filterForm.semester,
            "timeslotId": this.activeSlot?.id,
            "timetableProblemId": this.timetableProblemId,
            "tutor": this.getTutor(),
            "major": this.getMajor(),
            "clazz": this.getClazz()
        };
        this.onCreateNewLession.emit(payload);
    }
    get isAssignedTutor() {
        return this.activeTeachManagement && this.activeTeachManagement?.teachManagement?.tutorName;
    }
    get isUnAssignedTutor() {
        return this.activeTeachManagement && !this.activeTeachManagement?.teachManagement?.tutorName;
    }
    closeForm() {
        this.activeFormDialog.close();
    }
    removeLessionFromCell() {
        const activeLession = this.activeLessions[0];
        this.onRemoveAction.emit(activeLession);
    }
    ngOnDestroy() {
        this.destroyed$.next();
        this.destroyed$.complete();
        this.resetTimeTable();
    }
}
TimetableComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: TimetableComponent, deps: [{ token: i1.UntypedFormBuilder }], target: i0.ɵɵFactoryTarget.Component });
TimetableComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "15.2.9", type: TimetableComponent, selector: "tada-ngx-timetable", inputs: { filterForm: "filterForm", timeShift: "timeShift", schoolYear: "schoolYear", type: "type", grades: "grades", lessions: "lessions", timetableProblemId: "timetableProblemId", majorsTranscript: "majorsTranscript", classes: "classes", timeslots: "timeslots", isEnableAdjustMode: "isEnableAdjustMode", popUpContent: "popUpContent" }, outputs: { onRemoveAction: "onRemoveAction", onDropAcion: "onDropAcion", onCellClickAction: "onCellClickAction", onCreateNewLession: "onCreateNewLession", isInProgress: "isInProgress" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"timetable-ui\" [class.in-processing]=\"showProgressLoading\">\n  <div class=\"timetable-ui-prefix-column timetable-ui-day-column\">\n    <div class=\"timetable-ui-day-column-lesson\">\n      <div\n        class=\"timetable-ui-day-lesson-item\"\n        *ngFor=\"let lessonNum of dayLessionSlots\"\n      >\n        <div>\n          <span>Ti\u1EBFt {{ lessonNum + 1 }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div\n    *ngFor=\"let day of objectKeys(timeTableData)\"\n    class=\"timetable-ui-day-column\"\n  >\n    <div class=\"timetable-ui-day-column-lesson\">\n      <div class=\"timetable-ui-day-name\">\n        {{ day | translate }}\n      </div>\n      <div\n        class=\"timetable-ui-day-lesson-item timetable-ui-day-lesson-item-value\"\n        *ngFor=\"let slotNum of dayLessionSlots\"\n      >\n        <div\n          dndDropzone\n          [class.tbl-editing-mode]=\"isEnableAdjustMode\"\n          (dndDrop)=\"onDrop($event, day, slotNum + 1, timeShift)\"\n          [ngbPopover]=\"popContent\"\n          [autoClose]=\"'outside'\"\n          triggers=\"manual\"\n          #p=\"ngbPopover\"\n          placement=\"auto\"\n          class=\"timetable-ui-cell-container\"\n          [class.empty-lession]=\"\n            !getLessonByOrder(day, slotNum + 1, timeShift)?.length\n          \"\n          [class.is-disabled]=\"!getSlot(day, slotNum + 1)?.enabled\"\n          (click)=\"onCellClick(p, day, slotNum + 1, timeShift)\"\n        >\n          <div class=\"dnd-dropzone-slot\" dndPlaceholderRef></div>\n          <div\n            *ngFor=\"let lesson of getLessonByOrder(day, slotNum + 1, timeShift)\"\n            class=\"timetable-ui-day-lesson-item__item\"\n            [dndDraggable]=\"lesson\"\n            [dndDisableIf]=\"draggable.disable\"\n          >\n            <div>\n              <h4>{{ lesson?.details?.major.name }}</h4>\n              <p\n                class=\"sub-text-one\"\n                (click)=\"onClickTutorName(lesson.details.tutor)\"\n              >\n                <ng-container *ngIf=\"type === 'TUTOR'\">{{\n                  lesson?.details?.clazz.name\n                }}</ng-container>\n                <ng-container *ngIf=\"type === 'CLASS'\">{{\n                  lesson?.details?.tutor.name\n                }}</ng-container>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<ng-template #popContent>\n  <div class=\"schedule-pop-content\" *ngIf=\"mode == MODE.NEW\">\n    <div class=\"mb-1\">\n      <div class=\"schedule-pop-content-header\">\n        <span>Th\u00EAm ti\u1EBFt m\u1EDBi</span>\n      </div>\n      <div class=\"schedule-pop-content-line mb-2\"></div>\n      <form [formGroup]=\"form\" class=\"form\" (ngSubmit)=\"createNewLession()\">\n        <div class=\"form-group\">\n          <label class=\"required\">M\u00F4n h\u1ECDc</label>\n\n          <div class=\"d-block\">\n            <ng-select2\n              formControlName=\"majorCode\"\n              class=\"w-100\"\n              width=\"100%\"\n              (valueChanged)=\"onSelectTeachManagement($event)\"\n            >\n              <option value=\"-1\">Vui l\u00F2ng ch\u1ECDn</option>\n              <option\n                *ngFor=\"let item of majorsTranscript\"\n                value=\"{{ item.code }}\"\n              >\n                {{ item.title }}\n              </option>\n            </ng-select2>\n          </div>\n        </div>\n\n        <div class=\"form-group\" *ngIf=\"isAssignedTutor\">\n          <p class=\"sub-text-one\">\n            Gi\u00E1o vi\u00EAn: {{ activeTeachManagement?.teachManagement?.tutorName }}\n          </p>\n        </div>\n\n        <p class=\"unassigned_tutor\" *ngIf=\"isUnAssignedTutor\">\n          Gi\u00E1o vi\u00EAn: Ch\u01B0a \u0111\u01B0\u1EE3c ph\u00E2n c\u00F4ng.\n        </p>\n\n        <div class=\"buttons\">\n          <button\n            type=\"submit\"\n            [disabled]=\"!isAssignedTutor\"\n            color=\"primary\"\n            class=\"btn btn-primary\"\n          >\n\t\t\t\t\t\tL\u01B0u thay \u0111\u1ED5i\n          </button>\n          <button\n            color=\"primary\"\n            type=\"button\"\n            class=\"btn\"\n            (click)=\"closeForm()\"\n          >\n\t\t\t\t\t\tH\u1EE7y\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n\n  <ng-container *ngIf=\"mode == MODE.EDIT\">\n    <span (click)=\"removeLessionFromCell()\" class=\"remove-lession\">\n      <svg\n        width=\"14\"\n        height=\"14\"\n        viewBox=\"0 0 14 14\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M5.75 2.25V2.5H8.25V2.25C8.25 1.91848 8.1183 1.60054 7.88388 1.36612C7.64946 1.1317 7.33152 1 7 1C6.66848 1 6.35054 1.1317 6.11612 1.36612C5.8817 1.60054 5.75 1.91848 5.75 2.25ZM4.75 2.5V2.25C4.75 1.65326 4.98705 1.08097 5.40901 0.65901C5.83097 0.237053 6.40326 0 7 0C7.59674 0 8.16903 0.237053 8.59099 0.65901C9.01295 1.08097 9.25 1.65326 9.25 2.25V2.5H13C13.1326 2.5 13.2598 2.55268 13.3536 2.64645C13.4473 2.74021 13.5 2.86739 13.5 3C13.5 3.13261 13.4473 3.25979 13.3536 3.35355C13.2598 3.44732 13.1326 3.5 13 3.5H12.246L11.3 11.784C11.2302 12.3941 10.9384 12.9572 10.4801 13.3659C10.0218 13.7746 9.42907 14.0003 8.815 14H5.185C4.57093 14.0003 3.97823 13.7746 3.51993 13.3659C3.06162 12.9572 2.76976 12.3941 2.7 11.784L1.754 3.5H1C0.867392 3.5 0.740215 3.44732 0.646447 3.35355C0.552678 3.25979 0.5 3.13261 0.5 3C0.5 2.86739 0.552678 2.74021 0.646447 2.64645C0.740215 2.55268 0.867392 2.5 1 2.5H4.75ZM3.694 11.67C3.73574 12.036 3.91068 12.3738 4.18546 12.619C4.46025 12.8643 4.81567 12.9999 5.184 13H8.8155C9.18383 12.9999 9.53926 12.8643 9.81404 12.619C10.0888 12.3738 10.2638 12.036 10.3055 11.67L11.24 3.5H2.7605L3.694 11.67ZM5.5 5.25C5.63261 5.25 5.75979 5.30268 5.85355 5.39645C5.94732 5.49021 6 5.61739 6 5.75V10.75C6 10.8826 5.94732 11.0098 5.85355 11.1036C5.75979 11.1973 5.63261 11.25 5.5 11.25C5.36739 11.25 5.24021 11.1973 5.14645 11.1036C5.05268 11.0098 5 10.8826 5 10.75V5.75C5 5.61739 5.05268 5.49021 5.14645 5.39645C5.24021 5.30268 5.36739 5.25 5.5 5.25ZM9 5.75C9 5.61739 8.94732 5.49021 8.85355 5.39645C8.75979 5.30268 8.63261 5.25 8.5 5.25C8.36739 5.25 8.24021 5.30268 8.14645 5.39645C8.05268 5.49021 8 5.61739 8 5.75V10.75C8 10.8826 8.05268 11.0098 8.14645 11.1036C8.24021 11.1973 8.36739 11.25 8.5 11.25C8.63261 11.25 8.75979 11.1973 8.85355 11.1036C8.94732 11.0098 9 10.8826 9 10.75V5.75Z\"\n          fill=\"#D93A3A\"\n        />\n      </svg>\n\n      Xo\u00E1 ti\u1EBFt\n    </span>\n  </ng-container>\n</ng-template>\n", styles: [".timetable-ui-prefix-column{width:65px!important}.timetable-ui-prefix-column span{display:block;width:60px}.timetable-ui-prefix-column .timetable-ui-day-lesson-item{font-weight:600;font-size:12px;line-height:12px;position:relative;text-align:center;color:#737579}.timetable-ui-prefix-column .timetable-ui-day-lesson-item:first-child{border-top:none;margin-top:40px}.timetable-ui-prefix-column .timetable-ui-day-lesson-item:first-child>div{border-top:none}.timetable-ui{flex:1;display:flex;flex-direction:row;justify-content:space-between;border:1px solid #e2e8f0;overflow:inherit!important}.timetable-ui .timetable-ui-day-name{text-align:center;padding:10px 8px;width:100%;border:1px solid #e2e8f0}.timetable-ui .timetable-ui-day-column{width:100%}.timetable-ui.in-processing .timetable-ui-day-lesson-item-value .timetable-ui-day-lesson-item__item{opacity:.5}.timetable-ui .timetable-ui-day-column-lesson{display:flex;flex-direction:column}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item{position:relative}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div{padding:10px;height:58px;display:block;line-height:20px;width:100%;text-align:center;border:1px solid #e2e8f0;display:flex;align-items:center;justify-content:center}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div:hover{border-color:#999}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div.is-disabled{cursor:not-allowed!important}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div div.timetable-ui-day-lesson-item__item h4{width:100%;overflow:hidden;text-overflow:ellipsis;margin:0;color:#000;font-weight:700;font-size:12px}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div div.timetable-ui-day-lesson-item__item .sub-text-one{font-weight:400;font-size:12px;cursor:pointer;line-height:20px;margin:0;text-align:center;font-style:normal;color:#737579}.timetable__academic-year .mat-select{width:200px!important;margin:0 10px}.timetable__grade .mat-select{width:120px!important;margin:0 10px}.timetable__class .multi-select{margin:0 10px;width:200px!important}.timetable__semester--options{width:120px!important}.timetable__semester .mat-select{width:120px!important;margin:0 10px}h4.timeshift_title{font-size:14px;color:#2c2c2c;font-weight:600;text-align:center;margin:0;display:block}.timetable-timeshift-section-heading{padding:16px 8px;color:#737579;margin:0;display:block;align-items:center;background:#f5f5f5;display:flex;flex-direction:row;justify-content:space-between}.timetable-timeshift-section-heading .custom-control-label{font-weight:500;font-size:14px;letter-spacing:.01em;color:#000}.dnd-dropzone-slot{border:1px orangered solid;border-radius:5px;padding:15px;position:absolute;inset:5px}.tbl-editing-mode.empty-lession{background-color:#f8f8f8}.tbl-editing-mode.empty-lession:hover{background-color:#fafafa}.schedule-pop-content{width:301px;padding:6px}.schedule-pop-content h4{font-weight:700;font-size:12px;margin-bottom:5px;line-height:22px;color:#000;padding-bottom:8px;border-bottom:1px solid #eaeaea}.schedule-pop-content .schedule-pop-content-header{border-bottom:1px solid #eaeaea;margin-bottom:5px;padding-bottom:16px}.schedule-pop-content .schedule-pop-content-header span{font-style:normal;font-weight:700;font-size:14px;line-height:16px;text-align:center;letter-spacing:.01em;color:#000}.schedule-pop-content .schedule-pop-content-links{display:flex;flex-direction:row;gap:16px}.schedule-pop-content .schedule-pop-content-links span{font-weight:700;white-space:nowrap;font-size:12px;cursor:pointer;line-height:22px;text-decoration-line:underline;color:#1e88e5}.schedule-pop-content .class-online-label{font-weight:700;font-size:12px;line-height:22px;color:#999;text-decoration-line:underline}.schedule-pop-content .class-online-label.is-on{cursor:pointer;color:#1e88e5!important}::ng-deep .popover{max-width:498px;background:#ffffff;border:none;box-shadow:0 8px 12px #091e4226,0 0 1px #091e424f;border-radius:5px;color:#000}::ng-deep .popover p{color:#000}::ng-deep .popover p.sub-text-one{color:#737579}::ng-deep .popover p.unassigned_tutor{font-weight:400;font-size:14px;line-height:18px;color:#d93a3a}::ng-deep .popover .remove-icon{height:auto;width:18px;line-height:0}.btn{padding:11px 12px;gap:10px;width:102px;height:40px;border-radius:5px;cursor:pointer;background:none;color:#4b49ac;font-style:normal;font-weight:500;font-size:14px;white-space:nowrap;line-height:18px;font-family:Roboto}.btn.btn-primary{background:#4B49AC;color:#fff}.remove-lession{color:#d93a3a}\n"], dependencies: [{ kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i3.DndDraggableDirective, selector: "[dndDraggable]", inputs: ["dndDraggable", "dndEffectAllowed", "dndType", "dndDraggingClass", "dndDraggingSourceClass", "dndDraggableDisabledClass", "dndDragImageOffsetFunction", "dndDisableIf", "dndDisableDragIf"], outputs: ["dndStart", "dndDrag", "dndEnd", "dndMoved", "dndCopied", "dndLinked", "dndCanceled"] }, { kind: "directive", type: i3.DndDropzoneDirective, selector: "[dndDropzone]", inputs: ["dndDropzone", "dndEffectAllowed", "dndAllowExternal", "dndHorizontal", "dndDragoverClass", "dndDropzoneDisabledClass", "dndDisableIf", "dndDisableDropIf"], outputs: ["dndDragover", "dndDrop"] }, { kind: "directive", type: i3.DndPlaceholderRefDirective, selector: "[dndPlaceholderRef]" }, { kind: "component", type: i4.NgSelect2Component, selector: "ng-select2", inputs: ["data", "placeholder", "dropdownParent", "allowClear", "value", "width", "disabled", "id", "class", "required", "options"], outputs: ["valueChanged"] }, { kind: "directive", type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i1.NgSelectOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i1.ɵNgSelectMultipleOption, selector: "option", inputs: ["ngValue", "value"] }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i5.NgbPopover, selector: "[ngbPopover]", inputs: ["animation", "autoClose", "ngbPopover", "popoverTitle", "placement", "popperOptions", "triggers", "positionTarget", "container", "disablePopover", "popoverClass", "openDelay", "closeDelay"], outputs: ["shown", "hidden"], exportAs: ["ngbPopover"] }, { kind: "pipe", type: i6.TranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.2.9", ngImport: i0, type: TimetableComponent, decorators: [{
            type: Component,
            args: [{ selector: 'tada-ngx-timetable', template: "<div class=\"timetable-ui\" [class.in-processing]=\"showProgressLoading\">\n  <div class=\"timetable-ui-prefix-column timetable-ui-day-column\">\n    <div class=\"timetable-ui-day-column-lesson\">\n      <div\n        class=\"timetable-ui-day-lesson-item\"\n        *ngFor=\"let lessonNum of dayLessionSlots\"\n      >\n        <div>\n          <span>Ti\u1EBFt {{ lessonNum + 1 }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div\n    *ngFor=\"let day of objectKeys(timeTableData)\"\n    class=\"timetable-ui-day-column\"\n  >\n    <div class=\"timetable-ui-day-column-lesson\">\n      <div class=\"timetable-ui-day-name\">\n        {{ day | translate }}\n      </div>\n      <div\n        class=\"timetable-ui-day-lesson-item timetable-ui-day-lesson-item-value\"\n        *ngFor=\"let slotNum of dayLessionSlots\"\n      >\n        <div\n          dndDropzone\n          [class.tbl-editing-mode]=\"isEnableAdjustMode\"\n          (dndDrop)=\"onDrop($event, day, slotNum + 1, timeShift)\"\n          [ngbPopover]=\"popContent\"\n          [autoClose]=\"'outside'\"\n          triggers=\"manual\"\n          #p=\"ngbPopover\"\n          placement=\"auto\"\n          class=\"timetable-ui-cell-container\"\n          [class.empty-lession]=\"\n            !getLessonByOrder(day, slotNum + 1, timeShift)?.length\n          \"\n          [class.is-disabled]=\"!getSlot(day, slotNum + 1)?.enabled\"\n          (click)=\"onCellClick(p, day, slotNum + 1, timeShift)\"\n        >\n          <div class=\"dnd-dropzone-slot\" dndPlaceholderRef></div>\n          <div\n            *ngFor=\"let lesson of getLessonByOrder(day, slotNum + 1, timeShift)\"\n            class=\"timetable-ui-day-lesson-item__item\"\n            [dndDraggable]=\"lesson\"\n            [dndDisableIf]=\"draggable.disable\"\n          >\n            <div>\n              <h4>{{ lesson?.details?.major.name }}</h4>\n              <p\n                class=\"sub-text-one\"\n                (click)=\"onClickTutorName(lesson.details.tutor)\"\n              >\n                <ng-container *ngIf=\"type === 'TUTOR'\">{{\n                  lesson?.details?.clazz.name\n                }}</ng-container>\n                <ng-container *ngIf=\"type === 'CLASS'\">{{\n                  lesson?.details?.tutor.name\n                }}</ng-container>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<ng-template #popContent>\n  <div class=\"schedule-pop-content\" *ngIf=\"mode == MODE.NEW\">\n    <div class=\"mb-1\">\n      <div class=\"schedule-pop-content-header\">\n        <span>Th\u00EAm ti\u1EBFt m\u1EDBi</span>\n      </div>\n      <div class=\"schedule-pop-content-line mb-2\"></div>\n      <form [formGroup]=\"form\" class=\"form\" (ngSubmit)=\"createNewLession()\">\n        <div class=\"form-group\">\n          <label class=\"required\">M\u00F4n h\u1ECDc</label>\n\n          <div class=\"d-block\">\n            <ng-select2\n              formControlName=\"majorCode\"\n              class=\"w-100\"\n              width=\"100%\"\n              (valueChanged)=\"onSelectTeachManagement($event)\"\n            >\n              <option value=\"-1\">Vui l\u00F2ng ch\u1ECDn</option>\n              <option\n                *ngFor=\"let item of majorsTranscript\"\n                value=\"{{ item.code }}\"\n              >\n                {{ item.title }}\n              </option>\n            </ng-select2>\n          </div>\n        </div>\n\n        <div class=\"form-group\" *ngIf=\"isAssignedTutor\">\n          <p class=\"sub-text-one\">\n            Gi\u00E1o vi\u00EAn: {{ activeTeachManagement?.teachManagement?.tutorName }}\n          </p>\n        </div>\n\n        <p class=\"unassigned_tutor\" *ngIf=\"isUnAssignedTutor\">\n          Gi\u00E1o vi\u00EAn: Ch\u01B0a \u0111\u01B0\u1EE3c ph\u00E2n c\u00F4ng.\n        </p>\n\n        <div class=\"buttons\">\n          <button\n            type=\"submit\"\n            [disabled]=\"!isAssignedTutor\"\n            color=\"primary\"\n            class=\"btn btn-primary\"\n          >\n\t\t\t\t\t\tL\u01B0u thay \u0111\u1ED5i\n          </button>\n          <button\n            color=\"primary\"\n            type=\"button\"\n            class=\"btn\"\n            (click)=\"closeForm()\"\n          >\n\t\t\t\t\t\tH\u1EE7y\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n\n  <ng-container *ngIf=\"mode == MODE.EDIT\">\n    <span (click)=\"removeLessionFromCell()\" class=\"remove-lession\">\n      <svg\n        width=\"14\"\n        height=\"14\"\n        viewBox=\"0 0 14 14\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M5.75 2.25V2.5H8.25V2.25C8.25 1.91848 8.1183 1.60054 7.88388 1.36612C7.64946 1.1317 7.33152 1 7 1C6.66848 1 6.35054 1.1317 6.11612 1.36612C5.8817 1.60054 5.75 1.91848 5.75 2.25ZM4.75 2.5V2.25C4.75 1.65326 4.98705 1.08097 5.40901 0.65901C5.83097 0.237053 6.40326 0 7 0C7.59674 0 8.16903 0.237053 8.59099 0.65901C9.01295 1.08097 9.25 1.65326 9.25 2.25V2.5H13C13.1326 2.5 13.2598 2.55268 13.3536 2.64645C13.4473 2.74021 13.5 2.86739 13.5 3C13.5 3.13261 13.4473 3.25979 13.3536 3.35355C13.2598 3.44732 13.1326 3.5 13 3.5H12.246L11.3 11.784C11.2302 12.3941 10.9384 12.9572 10.4801 13.3659C10.0218 13.7746 9.42907 14.0003 8.815 14H5.185C4.57093 14.0003 3.97823 13.7746 3.51993 13.3659C3.06162 12.9572 2.76976 12.3941 2.7 11.784L1.754 3.5H1C0.867392 3.5 0.740215 3.44732 0.646447 3.35355C0.552678 3.25979 0.5 3.13261 0.5 3C0.5 2.86739 0.552678 2.74021 0.646447 2.64645C0.740215 2.55268 0.867392 2.5 1 2.5H4.75ZM3.694 11.67C3.73574 12.036 3.91068 12.3738 4.18546 12.619C4.46025 12.8643 4.81567 12.9999 5.184 13H8.8155C9.18383 12.9999 9.53926 12.8643 9.81404 12.619C10.0888 12.3738 10.2638 12.036 10.3055 11.67L11.24 3.5H2.7605L3.694 11.67ZM5.5 5.25C5.63261 5.25 5.75979 5.30268 5.85355 5.39645C5.94732 5.49021 6 5.61739 6 5.75V10.75C6 10.8826 5.94732 11.0098 5.85355 11.1036C5.75979 11.1973 5.63261 11.25 5.5 11.25C5.36739 11.25 5.24021 11.1973 5.14645 11.1036C5.05268 11.0098 5 10.8826 5 10.75V5.75C5 5.61739 5.05268 5.49021 5.14645 5.39645C5.24021 5.30268 5.36739 5.25 5.5 5.25ZM9 5.75C9 5.61739 8.94732 5.49021 8.85355 5.39645C8.75979 5.30268 8.63261 5.25 8.5 5.25C8.36739 5.25 8.24021 5.30268 8.14645 5.39645C8.05268 5.49021 8 5.61739 8 5.75V10.75C8 10.8826 8.05268 11.0098 8.14645 11.1036C8.24021 11.1973 8.36739 11.25 8.5 11.25C8.63261 11.25 8.75979 11.1973 8.85355 11.1036C8.94732 11.0098 9 10.8826 9 10.75V5.75Z\"\n          fill=\"#D93A3A\"\n        />\n      </svg>\n\n      Xo\u00E1 ti\u1EBFt\n    </span>\n  </ng-container>\n</ng-template>\n", styles: [".timetable-ui-prefix-column{width:65px!important}.timetable-ui-prefix-column span{display:block;width:60px}.timetable-ui-prefix-column .timetable-ui-day-lesson-item{font-weight:600;font-size:12px;line-height:12px;position:relative;text-align:center;color:#737579}.timetable-ui-prefix-column .timetable-ui-day-lesson-item:first-child{border-top:none;margin-top:40px}.timetable-ui-prefix-column .timetable-ui-day-lesson-item:first-child>div{border-top:none}.timetable-ui{flex:1;display:flex;flex-direction:row;justify-content:space-between;border:1px solid #e2e8f0;overflow:inherit!important}.timetable-ui .timetable-ui-day-name{text-align:center;padding:10px 8px;width:100%;border:1px solid #e2e8f0}.timetable-ui .timetable-ui-day-column{width:100%}.timetable-ui.in-processing .timetable-ui-day-lesson-item-value .timetable-ui-day-lesson-item__item{opacity:.5}.timetable-ui .timetable-ui-day-column-lesson{display:flex;flex-direction:column}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item{position:relative}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div{padding:10px;height:58px;display:block;line-height:20px;width:100%;text-align:center;border:1px solid #e2e8f0;display:flex;align-items:center;justify-content:center}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div:hover{border-color:#999}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div.is-disabled{cursor:not-allowed!important}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div div.timetable-ui-day-lesson-item__item h4{width:100%;overflow:hidden;text-overflow:ellipsis;margin:0;color:#000;font-weight:700;font-size:12px}.timetable-ui .timetable-ui-day-column-lesson>.timetable-ui-day-lesson-item>div div.timetable-ui-day-lesson-item__item .sub-text-one{font-weight:400;font-size:12px;cursor:pointer;line-height:20px;margin:0;text-align:center;font-style:normal;color:#737579}.timetable__academic-year .mat-select{width:200px!important;margin:0 10px}.timetable__grade .mat-select{width:120px!important;margin:0 10px}.timetable__class .multi-select{margin:0 10px;width:200px!important}.timetable__semester--options{width:120px!important}.timetable__semester .mat-select{width:120px!important;margin:0 10px}h4.timeshift_title{font-size:14px;color:#2c2c2c;font-weight:600;text-align:center;margin:0;display:block}.timetable-timeshift-section-heading{padding:16px 8px;color:#737579;margin:0;display:block;align-items:center;background:#f5f5f5;display:flex;flex-direction:row;justify-content:space-between}.timetable-timeshift-section-heading .custom-control-label{font-weight:500;font-size:14px;letter-spacing:.01em;color:#000}.dnd-dropzone-slot{border:1px orangered solid;border-radius:5px;padding:15px;position:absolute;inset:5px}.tbl-editing-mode.empty-lession{background-color:#f8f8f8}.tbl-editing-mode.empty-lession:hover{background-color:#fafafa}.schedule-pop-content{width:301px;padding:6px}.schedule-pop-content h4{font-weight:700;font-size:12px;margin-bottom:5px;line-height:22px;color:#000;padding-bottom:8px;border-bottom:1px solid #eaeaea}.schedule-pop-content .schedule-pop-content-header{border-bottom:1px solid #eaeaea;margin-bottom:5px;padding-bottom:16px}.schedule-pop-content .schedule-pop-content-header span{font-style:normal;font-weight:700;font-size:14px;line-height:16px;text-align:center;letter-spacing:.01em;color:#000}.schedule-pop-content .schedule-pop-content-links{display:flex;flex-direction:row;gap:16px}.schedule-pop-content .schedule-pop-content-links span{font-weight:700;white-space:nowrap;font-size:12px;cursor:pointer;line-height:22px;text-decoration-line:underline;color:#1e88e5}.schedule-pop-content .class-online-label{font-weight:700;font-size:12px;line-height:22px;color:#999;text-decoration-line:underline}.schedule-pop-content .class-online-label.is-on{cursor:pointer;color:#1e88e5!important}::ng-deep .popover{max-width:498px;background:#ffffff;border:none;box-shadow:0 8px 12px #091e4226,0 0 1px #091e424f;border-radius:5px;color:#000}::ng-deep .popover p{color:#000}::ng-deep .popover p.sub-text-one{color:#737579}::ng-deep .popover p.unassigned_tutor{font-weight:400;font-size:14px;line-height:18px;color:#d93a3a}::ng-deep .popover .remove-icon{height:auto;width:18px;line-height:0}.btn{padding:11px 12px;gap:10px;width:102px;height:40px;border-radius:5px;cursor:pointer;background:none;color:#4b49ac;font-style:normal;font-weight:500;font-size:14px;white-space:nowrap;line-height:18px;font-family:Roboto}.btn.btn-primary{background:#4B49AC;color:#fff}.remove-lession{color:#d93a3a}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.UntypedFormBuilder }]; }, propDecorators: { filterForm: [{
                type: Input
            }], timeShift: [{
                type: Input
            }], schoolYear: [{
                type: Input
            }], type: [{
                type: Input
            }], grades: [{
                type: Input
            }], lessions: [{
                type: Input
            }], timetableProblemId: [{
                type: Input
            }], majorsTranscript: [{
                type: Input
            }], classes: [{
                type: Input
            }], timeslots: [{
                type: Input
            }], isEnableAdjustMode: [{
                type: Input
            }], onRemoveAction: [{
                type: Output
            }], onDropAcion: [{
                type: Output
            }], onCellClickAction: [{
                type: Output
            }], popUpContent: [{
                type: Input
            }], onCreateNewLession: [{
                type: Output
            }], isInProgress: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZXRhYmxlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL3RpbWV0YWJsZS9zcmMvbGliL3RpbWV0YWJsZS5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy90aW1ldGFibGUvc3JjL2xpYi90aW1ldGFibGUuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUF3QixNQUFNLEVBQThCLE1BQU0sZUFBZSxDQUFDO0FBQ3pILE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDL0IsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDMUQsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7Ozs7Ozs7O0FBK0I1QixNQUFNLE9BQU8sa0JBQWtCO0lBOEU5QixZQUNTLEVBQXNCO1FBQXRCLE9BQUUsR0FBRixFQUFFLENBQW9CO1FBOUUvQixlQUFVLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUN6QixjQUFTLEdBQUc7WUFDWCxLQUFLLEVBQUUsT0FBTztZQUNkLE1BQU0sRUFBRSxRQUFRO1lBQ2hCLEdBQUcsRUFBRSxLQUFLO1NBQ1YsQ0FBQTtRQUNELGNBQVMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN4Qyx3QkFBbUIsR0FBUSxJQUFJLENBQUM7UUFDZixlQUFVLEdBQUcsSUFBSSxPQUFPLEVBQVEsQ0FBQztRQUNsRCxTQUFJLEdBQUc7WUFDTixJQUFJLEVBQUUsTUFBTTtZQUNaLEdBQUcsRUFBRSxLQUFLO1NBQ1YsQ0FBQTtRQVdRLHVCQUFrQixHQUFZLEtBQUssQ0FBQztRQUNuQyxtQkFBYyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFDekMsZ0JBQVcsR0FBRyxJQUFJLFlBQVks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bEMvQix1aE5Bb0pBOzJGRGxIYSxrQkFBa0I7a0JBTDlCLFNBQVM7K0JBQ0Msb0JBQW9CO3lHQWtCckIsVUFBVTtzQkFBbEIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLGtCQUFrQjtzQkFBMUIsS0FBSztnQkFDRyxnQkFBZ0I7c0JBQXhCLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLFNBQVM7c0JBQWpCLEtBQUs7Z0JBQ0csa0JBQWtCO3NCQUExQixLQUFLO2dCQUNJLGNBQWM7c0JBQXZCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTTtnQkFDRyxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBQ0UsWUFBWTtzQkFBcEIsS0FBSztnQkFDSSxrQkFBa0I7c0JBQTNCLE1BQU07Z0JBMEJHLFlBQVk7c0JBQXJCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsIFRlbXBsYXRlUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBUaW1ldGFibGVDb25zdGFudHMgfSBmcm9tICcuL3RpbWV0YWJsZS5jb25zdGFudCc7XG5pbXBvcnQgKiBhcyBfIGZyb20gXCJsb2Rhc2hcIjtcbmltcG9ydCB7IERuZERyb3BFdmVudCB9IGZyb20gJ25neC1kcmFnLWRyb3AnO1xuaW1wb3J0IHsgVW50eXBlZEZvcm1CdWlsZGVyLCBVbnR5cGVkRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElUaW1ldGFibGVTbG90IHtcblx0aWQ6IHN0cmluZztcblx0ZW5hYmxlZDogYm9vbGVhbixcblx0ZGF5T2ZXZWVrOiBzdHJpbmc7XG5cdHRpbWVzbG90OiBhbnksXG5cdHRpbWVTaGlmdDogc3RyaW5nO1xuXHRzdGFydFRpbWU6IG51bWJlcjtcblx0ZW5kVGltZTogbnVtYmVyO1xuXHRvcmRlcjogbnVtYmVyO1xuXHRhdmFpbGFibGU6IGJvb2xlYW47XG5cdGRldGFpbHM/OiBJQXZhaWxhYmlsaXR5IHwgbnVsbFxufVxuZXhwb3J0IGludGVyZmFjZSBJQXZhaWxhYmlsaXR5IHtcblx0aWQ/OiBudW1iZXIgfCBudWxsO1xuXHR0aW1lc2xvdElkOiBzdHJpbmc7XG5cdHNjaG9vbFllYXI6IG51bWJlcjtcblx0dGltZVNoaWZ0Pzogc3RyaW5nO1xuXHRzZW1lc3Rlcjogc3RyaW5nO1xuXHRhdmFpbGFibGU6IGJvb2xlYW47XG5cdGdyYWRlQ29kZTogc3RyaW5nO1xuXHRyZWFzb25PZlVuYXZhaWxhYmlsaXR5OiBhbnk7XG59XG5AQ29tcG9uZW50KHtcblx0c2VsZWN0b3I6ICd0YWRhLW5neC10aW1ldGFibGUnLFxuXHR0ZW1wbGF0ZVVybDogJ3RpbWV0YWJsZS5jb21wb25lbnQuaHRtbCcsXG5cdHN0eWxlVXJsczogW1widGltZXRhYmxlLmNvbXBvbmVudC5zY3NzXCJdXG59KVxuZXhwb3J0IGNsYXNzIFRpbWV0YWJsZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSwgT25DaGFuZ2VzIHtcblx0b2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzO1xuXHRTRU1FU1RFUlMgPSB7XG5cdFx0RklSU1Q6ICdGSVJTVCcsXG5cdFx0U0VDT05EOiAnU0VDT05EJyxcblx0XHRBTEw6ICdBTEwnXG5cdH1cblx0c2VtZXN0ZXJzID0gT2JqZWN0LmtleXModGhpcy5TRU1FU1RFUlMpO1xuXHRzb2x2ZXJTdGF0dXNNZXNzYWdlOiBhbnkgPSBudWxsO1xuXHRwcml2YXRlIHJlYWRvbmx5IGRlc3Ryb3llZCQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXHRNT0RFID0ge1xuXHRcdEVESVQ6ICdlZGl0Jyxcblx0XHRORVc6ICduZXcnXG5cdH1cblx0QElucHV0KCkgZmlsdGVyRm9ybTogYW55O1xuXHRASW5wdXQoKSB0aW1lU2hpZnQ6IGFueTtcblx0QElucHV0KCkgc2Nob29sWWVhcjogYW55O1xuXHRASW5wdXQoKSB0eXBlITogc3RyaW5nO1xuXHRASW5wdXQoKSBncmFkZXMhOiBhbnlbXTtcblx0QElucHV0KCkgbGVzc2lvbnMhOiBhbnlbXTtcblx0QElucHV0KCkgdGltZXRhYmxlUHJvYmxlbUlkITogYW55O1xuXHRASW5wdXQoKSBtYWpvcnNUcmFuc2NyaXB0ITogYW55W107XG5cdEBJbnB1dCgpIGNsYXNzZXMhOiBhbnlbXTtcblx0QElucHV0KCkgdGltZXNsb3RzITogYW55W107XG5cdEBJbnB1dCgpIGlzRW5hYmxlQWRqdXN0TW9kZTogYm9vbGVhbiA9IGZhbHNlO1xuXHRAT3V0cHV0KCkgb25SZW1vdmVBY3Rpb24gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblx0QE91dHB1dCgpIG9uRHJvcEFjaW9uID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cdEBPdXRwdXQoKSBvbkNlbGxDbGlja0FjdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXHRASW5wdXQoKSBwb3BVcENvbnRlbnQhOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXHRAT3V0cHV0KCkgb25DcmVhdGVOZXdMZXNzaW9uID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cblx0YWN0aXZlTGVzc2lvbnM6IGFueVtdID0gW107XG5cdGFjdGl2ZVRlYWNoTWFuYWdlbWVudDogYW55ID0gdW5kZWZpbmVkO1xuXHRwcml2YXRlIGRheXNPZldlZWsgPSBbXG5cdFx0XCJNT05EQVlcIixcblx0XHRcIlRVRVNEQVlcIixcblx0XHRcIldFRE5FU0RBWVwiLFxuXHRcdFwiVEhVUlNEQVlcIixcblx0XHRcIkZSSURBWVwiLFxuXHRcdFwiU0FUVVJEQVlcIixcblx0XHRcIlNVTkRBWVwiLFxuXHRdO1xuXG5cdG1vZGU6IGFueTtcblxuXHRkcmFnZ2FibGUgPSB7XG5cdFx0ZGF0YTogbnVsbCxcblx0XHRlZmZlY3RBbGxvd2VkOiBcImFsbFwiLFxuXHRcdGRpc2FibGU6IHRydWUsXG5cdFx0aGFuZGxlOiBmYWxzZVxuXHR9O1xuXG5cdGZvcm0hOiBVbnR5cGVkRm9ybUdyb3VwO1xuXHR0aW1lVGFibGVEYXRhOiBhbnkgPSB7fTtcblx0aXNBdXRvVXBkYXRlQ2xhc3NJZHM6IGJvb2xlYW4gPSBmYWxzZTtcblx0QE91dHB1dCgpIGlzSW5Qcm9ncmVzcyA9IG5ldyBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4oKTtcblx0c2VsZWN0ZWRDbGFzc2VzOiBhbnlbXSA9IFtdO1xuXHRjbGFzc0xpc3RTZWxlY3RlZERlZmF1bHQ6IGFueVtdID0gW107XG5cdHRlYWNoTWFuYWdlbWVudHM6IGFueVtdID0gW107XG5cdGRheUxlc3Npb25TbG90cyA9IFsuLi5BcnJheSg1KS5rZXlzKCldO1xuXHRDQUxMQkFDS19USU1FID0gNTAwMDtcblx0Y2hlY2tpbmdHZW5lcmF0ZVByb2dyZXNzZXI6IGFueSA9IG51bGw7XG5cdGlzRGlzYWJsZWRQbGFubmluZzogYm9vbGVhbiA9IGZhbHNlO1xuXHRzbG90TnVtT2ZEYXk6IGFueVtdID0gW107XG5cdHNob3dQcm9ncmVzc0xvYWRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRUSU1FVEFCTEVfRURJVF9NT0RFID0gVGltZXRhYmxlQ29uc3RhbnRzLlRJTUVUQUJMRV9FRElUX01PREU7XG5cblx0YWN0aXZlU2xvdDogYW55O1xuXHRhY3RpdmVGb3JtRGlhbG9nOiBhbnk7XG5cblx0Rk9STV9GSUVMRFMgPSB7XG5cdFx0TUFKT1I6ICdtYWpvckNvZGUnLFxuXHRcdFRVVE9SOiAndHV0b3JVdWlkJyxcblx0XHRDTEFTU19JRDogJ2NsYXNzSWQnLFxuXHRcdFNFTUVTVEVSOiAnc2VtZXN0ZXInXG5cdH07XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBmYjogVW50eXBlZEZvcm1CdWlsZGVyLFxuXHQpIHtcblx0XHR0aGlzLmZvcm0gPSB0aGlzLmZiLmdyb3VwKFxuXHRcdFx0e1xuXHRcdFx0XHRbdGhpcy5GT1JNX0ZJRUxEUy5NQUpPUl06IFt7IHZhbHVlOiAtMSB9XSxcblx0XHRcdFx0W3RoaXMuRk9STV9GSUVMRFMuVFVUT1JdOiBbeyB2YWx1ZTogJycgfV1cblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0bmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuXG5cdFx0aWYgKGNoYW5nZXNbJ3RpbWVTaGlmdCddPy5jdXJyZW50VmFsdWUpIHtcblx0XHRcdHRoaXMuYnVpbGRUaW1lVGFibGVCYXNpYygpO1xuXHRcdH1cblx0XHRcblx0XHRpZiAoY2hhbmdlc1sndGltZXNsb3RzJ10/LmN1cnJlbnRWYWx1ZSAgKSB7XG5cdFx0XHRcdHRoaXMuaW5pdFRpbWV0YWJsZVNsb3QoKTtcblx0XHR9XG5cblx0XHRpZiAoY2hhbmdlc1snaXNFbmFibGVBZGp1c3RNb2RlJ10/LmN1cnJlbnRWYWx1ZSAgKSB7XG5cdFx0XHR0aGlzLmRyYWdnYWJsZSA9IHtcblx0XHRcdFx0Li4udGhpcy5kcmFnZ2FibGUsXG5cdFx0XHRcdGRpc2FibGU6ICF0aGlzLmlzRW5hYmxlQWRqdXN0TW9kZVxuXHRcdFx0fTtcblx0XHR9XG5cblx0XHRpZiAoY2hhbmdlc1snY2xhc3NlcyddPy5jdXJyZW50VmFsdWUgJiYgIWNoYW5nZXNbJ3RpbWVzbG90cyddPy5maXJzdENoYW5nZSkgIHtcblx0XHRcdHRoaXMucmVzZXRUaW1lVGFibGUoKTtcblx0XHR9XG5cblx0XHRpZiAoY2hhbmdlc1snbGVzc2lvbnMnXT8uY3VycmVudFZhbHVlKSB7XG5cdFx0XHR0aGlzLm1hcHBpbmdEYXRhVG9UYWJsZSgpO1xuXHRcdH1cblxuXHRcdGNvbnNvbGUubG9nKFwiY2hhbmdlczpcIiwgY2hhbmdlcyk7XG5cblx0fVxuXG5cdGluaXRUaW1ldGFibGVTbG90KCkge1xuXHRcdGNvbnN0IGFsbHRpbWVzbG90OiBJVGltZXRhYmxlU2xvdFtdID0gdGhpcy50aW1lc2xvdHM7XG5cdFx0dGhpcy5kYXlzT2ZXZWVrLmZvckVhY2goKGRheSkgPT4ge1xuXHRcdFx0Y29uc3Qgc2xvdHNPZkRheSA9IGFsbHRpbWVzbG90LmZpbHRlcihcblx0XHRcdFx0KHNsb3Q6IGFueSkgPT4gc2xvdC5kYXlPZldlZWsgPT09IGRheSAmJiBzbG90LnRpbWVTaGlmdCA9PT0gdGhpcy50aW1lU2hpZnRcblx0XHRcdCk7XG5cdFx0XHR0aGlzLnRpbWVUYWJsZURhdGFbZGF5XSA9IHtcblx0XHRcdFx0aXRlbXM6IF8ub3JkZXJCeShzbG90c09mRGF5LCBbXCJvcmRlclwiXSksXG5cdFx0XHR9O1xuXHRcdFx0Y29uc3QgbWF4TGVzc2lvbiA9IHRoaXMuZ2V0TWF4bGVzc2lvbk9yZGVyKHNsb3RzT2ZEYXkpO1xuXHRcdFx0dGhpcy5zbG90TnVtT2ZEYXkgPSBbLi4uQXJyYXkobWF4TGVzc2lvbikua2V5cygpXTtcblx0XHR9KTtcblx0fVxuXG5cdGdldE1heGxlc3Npb25PcmRlcih0aW1lU2xvdDogYW55W10pIHtcblx0XHRyZXR1cm4gXy5tYXhCeSh0aW1lU2xvdCwgKG86IGFueSkgPT4geyByZXR1cm4gby5vcmRlcjsgfSk/Lm9yZGVyIHx8IDEwO1xuXHR9XG5cblx0YnVpbGRUaW1lVGFibGVCYXNpYygpIHtcblx0XHR0aGlzLmRheXNPZldlZWsuZm9yRWFjaCgoZGF5OiBzdHJpbmcpID0+IHtcblx0XHRcdHRoaXMudGltZVRhYmxlRGF0YVtkYXldID0ge1xuXHRcdFx0XHRpdGVtczogW10sXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHR9XG5cblx0bWFwcGluZ0RhdGFUb1RhYmxlKCkge1xuXHRcdHRoaXMuZGF5c09mV2Vlay5mb3JFYWNoKChkYXkpID0+IHtcblx0XHRcdGNvbnN0IHNsb3RzT2ZEYXkgPSB0aGlzLmxlc3Npb25zLmZpbHRlcihcblx0XHRcdFx0KHNsb3Q6IGFueSkgPT4gc2xvdC5kYXlPZldlZWsgPT09IGRheVxuXHRcdFx0KTtcblx0XHRcdHRoaXMudGltZVRhYmxlRGF0YVtkYXldID0ge1xuXHRcdFx0XHRpdGVtczogXy5vcmRlckJ5KHNsb3RzT2ZEYXksIFtcIm9yZGVyXCJdKSxcblx0XHRcdH07XG5cdFx0fSk7XG5cdFx0Y29uc29sZS5sb2coXCJ0aGlzLnRpbWVUYWJsZURhdGE6XCIsIHRoaXMudGltZVRhYmxlRGF0YSk7XG5cdH1cblxuXHRnZXRMZXNzb25CeU9yZGVyKGRheTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCB0aW1lU2hpZnQ6IHN0cmluZykge1xuXHRcdHJldHVybiB0aGlzLnRpbWVUYWJsZURhdGFbZGF5XS5pdGVtcy5maWx0ZXIoXG5cdFx0XHQoaXRlbTogYW55KSA9PiB7XG5cdFx0XHRcdGNvbnN0IGZvdW5kID0gaXRlbS5vcmRlciA9PT0gaW5kZXggJiYgaXRlbT8udGltZVNoaWZ0ID09PSB0aW1lU2hpZnQ7XG5cdFx0XHRcdHJldHVybiBmb3VuZDtcblx0XHRcdH1cblx0XHQpO1xuXHR9XG5cblx0cmVzZXRUaW1lVGFibGUoKSB7XG5cdFx0dGhpcy5idWlsZFRpbWVUYWJsZUJhc2ljKCk7XG5cdH1cblxuXG5cdG9uQ2xpY2tUdXRvck5hbWUodHV0b3I6IGFueSkge1xuXHRcdHdpbmRvdy5vcGVuKGAvdHV0b3JzLyR7dHV0b3IudXVpZH1gLCAnX2JsYW5rJylcblx0fVxuXG5cdGdldEFjdGl2ZUdyYWRlTmFtZSgpIHtcblx0XHRyZXR1cm4gXy5maW5kKHRoaXMuZ3JhZGVzLCAoaXRlbTogYW55KSA9PiBpdGVtLmNvZGUgPT09IHRoaXMuZmlsdGVyRm9ybVsnZ3JhZGVDb2RlJ10pPy50aXRsZTtcblx0fVxuXG5cdG9uRHJvcChldmVudDogRG5kRHJvcEV2ZW50LCBkYXk6IHN0cmluZywgc2xvdE51bTogbnVtYmVyLCB0aW1lU2hpZnQ6IHN0cmluZykge1xuXG5cdFx0Y29uc3QgZHJvcFNsb3QgPSB0aGlzLmdldFNsb3QoZGF5LCBzbG90TnVtKTtcblxuXHRcdGNvbnN0IGRyb3BMZXNzaW9uID0ge1xuXHRcdFx0XCJpZFwiOiBfLmdldChldmVudCwgXCJkYXRhLmRldGFpbHMuaWRcIiwgMCksXG5cdFx0XHRcInNjaG9vbFllYXJcIjogXy5nZXQoZXZlbnQsIFwiZGF0YS5kZXRhaWxzLnNjaG9vbFllYXJcIiwgMCksXG5cdFx0XHRcInNlbWVzdGVyXCI6IF8uZ2V0KGV2ZW50LCBcImRhdGEuZGV0YWlscy5zZW1lc3RlclwiLCAwKSxcblx0XHRcdHRpbWVzbG90SWQ6IGRyb3BTbG90LmlkLFxuXHRcdFx0dGltZXRhYmxlUHJvYmxlbUlkOiB0aGlzLnRpbWV0YWJsZVByb2JsZW1JZCxcblx0XHRcdFwidHV0b3JcIjogXy5nZXQoZXZlbnQsIFwiZGF0YS5kZXRhaWxzLnR1dG9yXCIsIG51bGwpLFxuXHRcdFx0XCJtYWpvclwiOiBfLmdldChldmVudCwgXCJkYXRhLmRldGFpbHMubWFqb3JcIiwgbnVsbCksXG5cdFx0XHRcImNsYXp6XCI6IF8uZ2V0KGV2ZW50LCBcImRhdGEuZGV0YWlscy5jbGF6elwiLCBudWxsKSxcblx0XHR9O1xuXG5cdFx0Y29uc3QgcGF5bG9hZCA9IFtkcm9wTGVzc2lvbl07XG5cblx0XHRsZXQgY3VycmVudExlc3Npb24gPSBfLmdldCh0aGlzLmdldExlc3NvbkJ5T3JkZXIoZGF5LCBzbG90TnVtLCB0aW1lU2hpZnQpLCBcIjBcIiwgbnVsbCk7XG5cblx0XHRpZiAoY3VycmVudExlc3Npb24pIHtcblxuXHRcdFx0Y3VycmVudExlc3Npb24gPSB7XG5cdFx0XHRcdFwiaWRcIjogXy5nZXQoY3VycmVudExlc3Npb24sIFwiZGV0YWlscy5pZFwiLCAwKSxcblx0XHRcdFx0XCJzY2hvb2xZZWFyXCI6IF8uZ2V0KGN1cnJlbnRMZXNzaW9uLCBcImRldGFpbHMuc2Nob29sWWVhclwiLCAwKSxcblx0XHRcdFx0XCJzZW1lc3RlclwiOiBfLmdldChjdXJyZW50TGVzc2lvbiwgXCJkZXRhaWxzLnNlbWVzdGVyXCIsIDApLFxuXHRcdFx0XHR0aW1lc2xvdElkOiBfLmdldChldmVudCwgXCJkYXRhLmRldGFpbHMudGltZXNsb3QuaWRcIiwgMCksXG5cdFx0XHRcdHRpbWV0YWJsZVByb2JsZW1JZDogdGhpcy50aW1ldGFibGVQcm9ibGVtSWQsXG5cdFx0XHRcdFwidHV0b3JcIjogXy5nZXQoY3VycmVudExlc3Npb24sIFwiZGV0YWlscy50dXRvclwiLCBudWxsKSxcblx0XHRcdFx0XCJtYWpvclwiOiBfLmdldChjdXJyZW50TGVzc2lvbiwgXCJkZXRhaWxzLm1ham9yXCIsIG51bGwpLFxuXHRcdFx0XHRcImNsYXp6XCI6IF8uZ2V0KGN1cnJlbnRMZXNzaW9uLCBcImRldGFpbHMuY2xhenpcIiwgbnVsbCksXG5cdFx0XHR9O1xuXG5cdFx0XHRwYXlsb2FkLnB1c2goY3VycmVudExlc3Npb24pO1xuXHRcdH1cblxuXHRcdHRoaXMub25Ecm9wQWNpb24uZW1pdChwYXlsb2FkKTtcblxuXHR9XG5cblx0Y2hhbmdlT25PZmZTd2l0Y2goJGV2ZW50OiBhbnkpIHtcblxuXHRcdHRoaXMuaXNFbmFibGVBZGp1c3RNb2RlID0gJGV2ZW50LnRhcmdldC5jaGVja2VkO1xuXG5cdFx0dGhpcy5kcmFnZ2FibGUgPSB7XG5cdFx0XHQuLi50aGlzLmRyYWdnYWJsZSxcblx0XHRcdGRpc2FibGU6ICF0aGlzLmlzRW5hYmxlQWRqdXN0TW9kZVxuXHRcdH07XG5cblx0fVxuXG5cdGdldFNsb3QoZGF5OiBzdHJpbmcsIG9yZGVyOiBudW1iZXIpIHtcblx0XHRjb25zdCBzbG90ID0gdGhpcy50aW1lc2xvdHMuZmluZChcblx0XHRcdChzbG90OiBhbnkpID0+IHNsb3QuZGF5T2ZXZWVrID09PSBkYXkgJiYgc2xvdC50aW1lU2hpZnQgPT09IHRoaXMudGltZVNoaWZ0ICYmIHNsb3Qub3JkZXIgPT09IG9yZGVyXG5cdFx0KTtcblx0XHRyZXR1cm4gc2xvdDtcblx0fVxuXG5cdGdldFNsb3RCeU9yZGVyKGRheTogc3RyaW5nLCBpbmRleDogbnVtYmVyKSB7XG5cdFx0cmV0dXJuIHRoaXMudGltZVRhYmxlRGF0YVtkYXldLml0ZW1zLmZpbHRlcihcblx0XHRcdChpdGVtOiBJVGltZXRhYmxlU2xvdCkgPT4gaXRlbS5vcmRlciA9PT0gaW5kZXhcblx0XHQpO1xuXHR9XG5cblx0b25DZWxsQ2xpY2socDogYW55LCBkYXk6IHN0cmluZywgc2xvdE51bTogbnVtYmVyLCB0aW1lU2hpZnQ6IHN0cmluZykge1xuXG5cdFx0dGhpcy5hY3RpdmVTbG90ID0gdGhpcy5nZXRTbG90KGRheSwgc2xvdE51bSk7XG5cdFx0dGhpcy5hY3RpdmVUZWFjaE1hbmFnZW1lbnQgPSBudWxsO1xuXHRcdGlmICghdGhpcy5pc0VuYWJsZUFkanVzdE1vZGUgfHwgIXRoaXMuYWN0aXZlU2xvdC5lbmFibGVkKSByZXR1cm47XG5cdFx0dGhpcy5hY3RpdmVMZXNzaW9ucyA9IHRoaXMuZ2V0TGVzc29uQnlPcmRlcihkYXksIHNsb3ROdW0sIHRpbWVTaGlmdCk7XG5cdFx0cC5vcGVuKCk7XG5cblx0XHRpZiAoIXRoaXMuYWN0aXZlTGVzc2lvbnM/Lmxlbmd0aCkge1xuXHRcdFx0dGhpcy5tb2RlID0gdGhpcy5NT0RFLk5FVztcblx0XHRcdHRoaXMuYWN0aXZlRm9ybURpYWxvZyA9IHA7XG5cdFx0XHR0aGlzLm9uQ2VsbENsaWNrQWN0aW9uLmVtaXQodGhpcy5hY3RpdmVMZXNzaW9ucyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMubW9kZSA9IHRoaXMuTU9ERS5FRElUO1xuXHRcdH1cblx0fVxuXG5cdG9uU2VsZWN0VGVhY2hNYW5hZ2VtZW50KCRldmVudDogYW55KSB7XG5cdFx0dGhpcy5hY3RpdmVUZWFjaE1hbmFnZW1lbnQgPSB0aGlzLm1ham9yc1RyYW5zY3JpcHQuZmluZCgoaXRlbTogYW55KSA9PiBpdGVtLmNvZGUgPT09ICRldmVudCk7XG5cdH1cblxuXHRnZXRNYWpvcigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0XCJjb2RlXCI6IF8uZ2V0KHRoaXMuYWN0aXZlVGVhY2hNYW5hZ2VtZW50LCAndGVhY2hNYW5hZ2VtZW50Lm1ham9yQ29kZScsIDApLFxuXHRcdFx0XCJuYW1lXCI6IF8uZ2V0KHRoaXMuYWN0aXZlVGVhY2hNYW5hZ2VtZW50LCAndGVhY2hNYW5hZ2VtZW50Lm1ham9yTmFtZScsIDApLFxuXHRcdH1cblx0fVxuXG5cdGdldFR1dG9yKCkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRcInV1aWRcIjogXy5nZXQodGhpcy5hY3RpdmVUZWFjaE1hbmFnZW1lbnQsICd0ZWFjaE1hbmFnZW1lbnQudHV0b3JVdWlkJywgMCksXG5cdFx0XHRcIm5hbWVcIjogXy5nZXQodGhpcy5hY3RpdmVUZWFjaE1hbmFnZW1lbnQsICd0ZWFjaE1hbmFnZW1lbnQudHV0b3JOYW1lJywgMClcblx0XHR9XG5cdH1cblxuXHRnZXRDbGF6eigpIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0XCJjb2RlXCI6IF8uZ2V0KHRoaXMuYWN0aXZlVGVhY2hNYW5hZ2VtZW50LCAndGVhY2hNYW5hZ2VtZW50LmNsYXNzSWQnLCAwKSxcblx0XHRcdFwibmFtZVwiOiBfLmdldCh0aGlzLmFjdGl2ZVRlYWNoTWFuYWdlbWVudCwgJ3RlYWNoTWFuYWdlbWVudC5jbGFzc05hbWUnLCAwKSxcblx0XHRcdFwiZ3JhZGVDb2RlXCI6IF8uZ2V0KHRoaXMuYWN0aXZlVGVhY2hNYW5hZ2VtZW50LCAndGVhY2hNYW5hZ2VtZW50LmdyYWRlQ29kZScsIDApLFxuXHRcdH1cblx0fVxuXG5cdGNyZWF0ZU5ld0xlc3Npb24oKSB7XG5cblx0XHRpZiAoIXRoaXMuZm9ybS52YWxpZCkgcmV0dXJuO1xuXG5cdFx0Y29uc3QgcGF5bG9hZCA9IHtcblx0XHRcdFwic2Nob29sWWVhclwiOiB0aGlzLnNjaG9vbFllYXIsXG5cdFx0XHRcInNlbWVzdGVyXCI6IHRoaXMuZmlsdGVyRm9ybS5zZW1lc3Rlcixcblx0XHRcdFwidGltZXNsb3RJZFwiOiB0aGlzLmFjdGl2ZVNsb3Q/LmlkLFxuXHRcdFx0XCJ0aW1ldGFibGVQcm9ibGVtSWRcIjogdGhpcy50aW1ldGFibGVQcm9ibGVtSWQsXG5cdFx0XHRcInR1dG9yXCI6IHRoaXMuZ2V0VHV0b3IoKSxcblx0XHRcdFwibWFqb3JcIjogdGhpcy5nZXRNYWpvcigpLFxuXHRcdFx0XCJjbGF6elwiOiB0aGlzLmdldENsYXp6KClcblx0XHR9XG5cblx0XHR0aGlzLm9uQ3JlYXRlTmV3TGVzc2lvbi5lbWl0KHBheWxvYWQpO1xuXG5cdH1cblxuXHRnZXQgaXNBc3NpZ25lZFR1dG9yKCkge1xuXHRcdHJldHVybiB0aGlzLmFjdGl2ZVRlYWNoTWFuYWdlbWVudCAmJiB0aGlzLmFjdGl2ZVRlYWNoTWFuYWdlbWVudD8udGVhY2hNYW5hZ2VtZW50Py50dXRvck5hbWU7XG5cdH1cblxuXHRnZXQgaXNVbkFzc2lnbmVkVHV0b3IoKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWN0aXZlVGVhY2hNYW5hZ2VtZW50ICYmICF0aGlzLmFjdGl2ZVRlYWNoTWFuYWdlbWVudD8udGVhY2hNYW5hZ2VtZW50Py50dXRvck5hbWU7XG5cdH1cblxuXHRjbG9zZUZvcm0oKSB7XG5cdFx0dGhpcy5hY3RpdmVGb3JtRGlhbG9nLmNsb3NlKCk7XG5cdH1cblxuXHRyZW1vdmVMZXNzaW9uRnJvbUNlbGwoKSB7XG5cdFx0Y29uc3QgYWN0aXZlTGVzc2lvbiA9IHRoaXMuYWN0aXZlTGVzc2lvbnNbMF07XG5cdFx0dGhpcy5vblJlbW92ZUFjdGlvbi5lbWl0KGFjdGl2ZUxlc3Npb24pXG5cdH1cblxuXHRuZ09uRGVzdHJveSgpOiB2b2lkIHtcblx0XHR0aGlzLmRlc3Ryb3llZCQubmV4dCgpO1xuXHRcdHRoaXMuZGVzdHJveWVkJC5jb21wbGV0ZSgpO1xuXHRcdHRoaXMucmVzZXRUaW1lVGFibGUoKTtcblx0fVxufVxuIiwiPGRpdiBjbGFzcz1cInRpbWV0YWJsZS11aVwiIFtjbGFzcy5pbi1wcm9jZXNzaW5nXT1cInNob3dQcm9ncmVzc0xvYWRpbmdcIj5cbiAgPGRpdiBjbGFzcz1cInRpbWV0YWJsZS11aS1wcmVmaXgtY29sdW1uIHRpbWV0YWJsZS11aS1kYXktY29sdW1uXCI+XG4gICAgPGRpdiBjbGFzcz1cInRpbWV0YWJsZS11aS1kYXktY29sdW1uLWxlc3NvblwiPlxuICAgICAgPGRpdlxuICAgICAgICBjbGFzcz1cInRpbWV0YWJsZS11aS1kYXktbGVzc29uLWl0ZW1cIlxuICAgICAgICAqbmdGb3I9XCJsZXQgbGVzc29uTnVtIG9mIGRheUxlc3Npb25TbG90c1wiXG4gICAgICA+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPHNwYW4+VGnhur90IHt7IGxlc3Nvbk51bSArIDEgfX08L3NwYW4+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgKm5nRm9yPVwibGV0IGRheSBvZiBvYmplY3RLZXlzKHRpbWVUYWJsZURhdGEpXCJcbiAgICBjbGFzcz1cInRpbWV0YWJsZS11aS1kYXktY29sdW1uXCJcbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJ0aW1ldGFibGUtdWktZGF5LWNvbHVtbi1sZXNzb25cIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0aW1ldGFibGUtdWktZGF5LW5hbWVcIj5cbiAgICAgICAge3sgZGF5IHwgdHJhbnNsYXRlIH19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJ0aW1ldGFibGUtdWktZGF5LWxlc3Nvbi1pdGVtIHRpbWV0YWJsZS11aS1kYXktbGVzc29uLWl0ZW0tdmFsdWVcIlxuICAgICAgICAqbmdGb3I9XCJsZXQgc2xvdE51bSBvZiBkYXlMZXNzaW9uU2xvdHNcIlxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgZG5kRHJvcHpvbmVcbiAgICAgICAgICBbY2xhc3MudGJsLWVkaXRpbmctbW9kZV09XCJpc0VuYWJsZUFkanVzdE1vZGVcIlxuICAgICAgICAgIChkbmREcm9wKT1cIm9uRHJvcCgkZXZlbnQsIGRheSwgc2xvdE51bSArIDEsIHRpbWVTaGlmdClcIlxuICAgICAgICAgIFtuZ2JQb3BvdmVyXT1cInBvcENvbnRlbnRcIlxuICAgICAgICAgIFthdXRvQ2xvc2VdPVwiJ291dHNpZGUnXCJcbiAgICAgICAgICB0cmlnZ2Vycz1cIm1hbnVhbFwiXG4gICAgICAgICAgI3A9XCJuZ2JQb3BvdmVyXCJcbiAgICAgICAgICBwbGFjZW1lbnQ9XCJhdXRvXCJcbiAgICAgICAgICBjbGFzcz1cInRpbWV0YWJsZS11aS1jZWxsLWNvbnRhaW5lclwiXG4gICAgICAgICAgW2NsYXNzLmVtcHR5LWxlc3Npb25dPVwiXG4gICAgICAgICAgICAhZ2V0TGVzc29uQnlPcmRlcihkYXksIHNsb3ROdW0gKyAxLCB0aW1lU2hpZnQpPy5sZW5ndGhcbiAgICAgICAgICBcIlxuICAgICAgICAgIFtjbGFzcy5pcy1kaXNhYmxlZF09XCIhZ2V0U2xvdChkYXksIHNsb3ROdW0gKyAxKT8uZW5hYmxlZFwiXG4gICAgICAgICAgKGNsaWNrKT1cIm9uQ2VsbENsaWNrKHAsIGRheSwgc2xvdE51bSArIDEsIHRpbWVTaGlmdClcIlxuICAgICAgICA+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRuZC1kcm9wem9uZS1zbG90XCIgZG5kUGxhY2Vob2xkZXJSZWY+PC9kaXY+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgKm5nRm9yPVwibGV0IGxlc3NvbiBvZiBnZXRMZXNzb25CeU9yZGVyKGRheSwgc2xvdE51bSArIDEsIHRpbWVTaGlmdClcIlxuICAgICAgICAgICAgY2xhc3M9XCJ0aW1ldGFibGUtdWktZGF5LWxlc3Nvbi1pdGVtX19pdGVtXCJcbiAgICAgICAgICAgIFtkbmREcmFnZ2FibGVdPVwibGVzc29uXCJcbiAgICAgICAgICAgIFtkbmREaXNhYmxlSWZdPVwiZHJhZ2dhYmxlLmRpc2FibGVcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgIDxoND57eyBsZXNzb24/LmRldGFpbHM/Lm1ham9yLm5hbWUgfX08L2g0PlxuICAgICAgICAgICAgICA8cFxuICAgICAgICAgICAgICAgIGNsYXNzPVwic3ViLXRleHQtb25lXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwib25DbGlja1R1dG9yTmFtZShsZXNzb24uZGV0YWlscy50dXRvcilcIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInR5cGUgPT09ICdUVVRPUidcIj57e1xuICAgICAgICAgICAgICAgICAgbGVzc29uPy5kZXRhaWxzPy5jbGF6ei5uYW1lXG4gICAgICAgICAgICAgICAgfX08L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwidHlwZSA9PT0gJ0NMQVNTJ1wiPnt7XG4gICAgICAgICAgICAgICAgICBsZXNzb24/LmRldGFpbHM/LnR1dG9yLm5hbWVcbiAgICAgICAgICAgICAgICB9fTwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbjxuZy10ZW1wbGF0ZSAjcG9wQ29udGVudD5cbiAgPGRpdiBjbGFzcz1cInNjaGVkdWxlLXBvcC1jb250ZW50XCIgKm5nSWY9XCJtb2RlID09IE1PREUuTkVXXCI+XG4gICAgPGRpdiBjbGFzcz1cIm1iLTFcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzY2hlZHVsZS1wb3AtY29udGVudC1oZWFkZXJcIj5cbiAgICAgICAgPHNwYW4+VGjDqm0gdGnhur90IG3hu5tpPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwic2NoZWR1bGUtcG9wLWNvbnRlbnQtbGluZSBtYi0yXCI+PC9kaXY+XG4gICAgICA8Zm9ybSBbZm9ybUdyb3VwXT1cImZvcm1cIiBjbGFzcz1cImZvcm1cIiAobmdTdWJtaXQpPVwiY3JlYXRlTmV3TGVzc2lvbigpXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XG4gICAgICAgICAgPGxhYmVsIGNsYXNzPVwicmVxdWlyZWRcIj5Nw7RuIGjhu41jPC9sYWJlbD5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWJsb2NrXCI+XG4gICAgICAgICAgICA8bmctc2VsZWN0MlxuICAgICAgICAgICAgICBmb3JtQ29udHJvbE5hbWU9XCJtYWpvckNvZGVcIlxuICAgICAgICAgICAgICBjbGFzcz1cInctMTAwXCJcbiAgICAgICAgICAgICAgd2lkdGg9XCIxMDAlXCJcbiAgICAgICAgICAgICAgKHZhbHVlQ2hhbmdlZCk9XCJvblNlbGVjdFRlYWNoTWFuYWdlbWVudCgkZXZlbnQpXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIi0xXCI+VnVpIGzDsm5nIGNo4buNbjwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uXG4gICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGl0ZW0gb2YgbWFqb3JzVHJhbnNjcmlwdFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9XCJ7eyBpdGVtLmNvZGUgfX1cIlxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3sgaXRlbS50aXRsZSB9fVxuICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgIDwvbmctc2VsZWN0Mj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIiAqbmdJZj1cImlzQXNzaWduZWRUdXRvclwiPlxuICAgICAgICAgIDxwIGNsYXNzPVwic3ViLXRleHQtb25lXCI+XG4gICAgICAgICAgICBHacOhbyB2acOqbjoge3sgYWN0aXZlVGVhY2hNYW5hZ2VtZW50Py50ZWFjaE1hbmFnZW1lbnQ/LnR1dG9yTmFtZSB9fVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPHAgY2xhc3M9XCJ1bmFzc2lnbmVkX3R1dG9yXCIgKm5nSWY9XCJpc1VuQXNzaWduZWRUdXRvclwiPlxuICAgICAgICAgIEdpw6FvIHZpw6puOiBDaMawYSDEkcaw4bujYyBwaMOibiBjw7RuZy5cbiAgICAgICAgPC9wPlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInN1Ym1pdFwiXG4gICAgICAgICAgICBbZGlzYWJsZWRdPVwiIWlzQXNzaWduZWRUdXRvclwiXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIlxuICAgICAgICAgID5cblx0XHRcdFx0XHRcdEzGsHUgdGhheSDEkeG7lWlcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgICBjbGFzcz1cImJ0blwiXG4gICAgICAgICAgICAoY2xpY2spPVwiY2xvc2VGb3JtKClcIlxuICAgICAgICAgID5cblx0XHRcdFx0XHRcdEjhu6d5XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8bmctY29udGFpbmVyICpuZ0lmPVwibW9kZSA9PSBNT0RFLkVESVRcIj5cbiAgICA8c3BhbiAoY2xpY2spPVwicmVtb3ZlTGVzc2lvbkZyb21DZWxsKClcIiBjbGFzcz1cInJlbW92ZS1sZXNzaW9uXCI+XG4gICAgICA8c3ZnXG4gICAgICAgIHdpZHRoPVwiMTRcIlxuICAgICAgICBoZWlnaHQ9XCIxNFwiXG4gICAgICAgIHZpZXdCb3g9XCIwIDAgMTQgMTRcIlxuICAgICAgICBmaWxsPVwibm9uZVwiXG4gICAgICAgIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIlxuICAgICAgPlxuICAgICAgICA8cGF0aFxuICAgICAgICAgIGQ9XCJNNS43NSAyLjI1VjIuNUg4LjI1VjIuMjVDOC4yNSAxLjkxODQ4IDguMTE4MyAxLjYwMDU0IDcuODgzODggMS4zNjYxMkM3LjY0OTQ2IDEuMTMxNyA3LjMzMTUyIDEgNyAxQzYuNjY4NDggMSA2LjM1MDU0IDEuMTMxNyA2LjExNjEyIDEuMzY2MTJDNS44ODE3IDEuNjAwNTQgNS43NSAxLjkxODQ4IDUuNzUgMi4yNVpNNC43NSAyLjVWMi4yNUM0Ljc1IDEuNjUzMjYgNC45ODcwNSAxLjA4MDk3IDUuNDA5MDEgMC42NTkwMUM1LjgzMDk3IDAuMjM3MDUzIDYuNDAzMjYgMCA3IDBDNy41OTY3NCAwIDguMTY5MDMgMC4yMzcwNTMgOC41OTA5OSAwLjY1OTAxQzkuMDEyOTUgMS4wODA5NyA5LjI1IDEuNjUzMjYgOS4yNSAyLjI1VjIuNUgxM0MxMy4xMzI2IDIuNSAxMy4yNTk4IDIuNTUyNjggMTMuMzUzNiAyLjY0NjQ1QzEzLjQ0NzMgMi43NDAyMSAxMy41IDIuODY3MzkgMTMuNSAzQzEzLjUgMy4xMzI2MSAxMy40NDczIDMuMjU5NzkgMTMuMzUzNiAzLjM1MzU1QzEzLjI1OTggMy40NDczMiAxMy4xMzI2IDMuNSAxMyAzLjVIMTIuMjQ2TDExLjMgMTEuNzg0QzExLjIzMDIgMTIuMzk0MSAxMC45Mzg0IDEyLjk1NzIgMTAuNDgwMSAxMy4zNjU5QzEwLjAyMTggMTMuNzc0NiA5LjQyOTA3IDE0LjAwMDMgOC44MTUgMTRINS4xODVDNC41NzA5MyAxNC4wMDAzIDMuOTc4MjMgMTMuNzc0NiAzLjUxOTkzIDEzLjM2NTlDMy4wNjE2MiAxMi45NTcyIDIuNzY5NzYgMTIuMzk0MSAyLjcgMTEuNzg0TDEuNzU0IDMuNUgxQzAuODY3MzkyIDMuNSAwLjc0MDIxNSAzLjQ0NzMyIDAuNjQ2NDQ3IDMuMzUzNTVDMC41NTI2NzggMy4yNTk3OSAwLjUgMy4xMzI2MSAwLjUgM0MwLjUgMi44NjczOSAwLjU1MjY3OCAyLjc0MDIxIDAuNjQ2NDQ3IDIuNjQ2NDVDMC43NDAyMTUgMi41NTI2OCAwLjg2NzM5MiAyLjUgMSAyLjVINC43NVpNMy42OTQgMTEuNjdDMy43MzU3NCAxMi4wMzYgMy45MTA2OCAxMi4zNzM4IDQuMTg1NDYgMTIuNjE5QzQuNDYwMjUgMTIuODY0MyA0LjgxNTY3IDEyLjk5OTkgNS4xODQgMTNIOC44MTU1QzkuMTgzODMgMTIuOTk5OSA5LjUzOTI2IDEyLjg2NDMgOS44MTQwNCAxMi42MTlDMTAuMDg4OCAxMi4zNzM4IDEwLjI2MzggMTIuMDM2IDEwLjMwNTUgMTEuNjdMMTEuMjQgMy41SDIuNzYwNUwzLjY5NCAxMS42N1pNNS41IDUuMjVDNS42MzI2MSA1LjI1IDUuNzU5NzkgNS4zMDI2OCA1Ljg1MzU1IDUuMzk2NDVDNS45NDczMiA1LjQ5MDIxIDYgNS42MTczOSA2IDUuNzVWMTAuNzVDNiAxMC44ODI2IDUuOTQ3MzIgMTEuMDA5OCA1Ljg1MzU1IDExLjEwMzZDNS43NTk3OSAxMS4xOTczIDUuNjMyNjEgMTEuMjUgNS41IDExLjI1QzUuMzY3MzkgMTEuMjUgNS4yNDAyMSAxMS4xOTczIDUuMTQ2NDUgMTEuMTAzNkM1LjA1MjY4IDExLjAwOTggNSAxMC44ODI2IDUgMTAuNzVWNS43NUM1IDUuNjE3MzkgNS4wNTI2OCA1LjQ5MDIxIDUuMTQ2NDUgNS4zOTY0NUM1LjI0MDIxIDUuMzAyNjggNS4zNjczOSA1LjI1IDUuNSA1LjI1Wk05IDUuNzVDOSA1LjYxNzM5IDguOTQ3MzIgNS40OTAyMSA4Ljg1MzU1IDUuMzk2NDVDOC43NTk3OSA1LjMwMjY4IDguNjMyNjEgNS4yNSA4LjUgNS4yNUM4LjM2NzM5IDUuMjUgOC4yNDAyMSA1LjMwMjY4IDguMTQ2NDUgNS4zOTY0NUM4LjA1MjY4IDUuNDkwMjEgOCA1LjYxNzM5IDggNS43NVYxMC43NUM4IDEwLjg4MjYgOC4wNTI2OCAxMS4wMDk4IDguMTQ2NDUgMTEuMTAzNkM4LjI0MDIxIDExLjE5NzMgOC4zNjczOSAxMS4yNSA4LjUgMTEuMjVDOC42MzI2MSAxMS4yNSA4Ljc1OTc5IDExLjE5NzMgOC44NTM1NSAxMS4xMDM2QzguOTQ3MzIgMTEuMDA5OCA5IDEwLjg4MjYgOSAxMC43NVY1Ljc1WlwiXG4gICAgICAgICAgZmlsbD1cIiNEOTNBM0FcIlxuICAgICAgICAvPlxuICAgICAgPC9zdmc+XG5cbiAgICAgIFhvw6EgdGnhur90XG4gICAgPC9zcGFuPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=